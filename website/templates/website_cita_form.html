{% load crispy_forms_tags %}
{% load tailwind_filters %}
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

<!-- XDSoft DateTimePicker -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.css" integrity="sha256-DOS9W6NR+NFe1fUhEE0PGKY/fubbUCnOfTje2JMDw3Y=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js" integrity="sha256-FEqEelWI3WouFOo2VWP/uJfs1y8KJ++FLh2Lbqc8SJk=" crossorigin="anonymous"></script>



<img async loding="lazy"  src="{{footer.logo.url}}" alt="{{footer.nombre_comercial}}" width="350rem" style="width: 40%;margin: auto;">
  <h2>Cita </h2>
  <hr>
  <br>
  <form method="post" >
    {% csrf_token %}
    {{ form|crispy }}
     <div class="buttons">
    <button type="submit" class="btn">Agendar cita</button>

  </form>
  <button class="btn" type="button" onClick="javascript:history.go(-1);">Cancelar</button>
</div>
<script>

  $(function () {
    jQuery.datetimepicker.setLocale('es');
    $("#id_hora_inicio").datetimepicker({ beforeShowDay: noMondays, format:'Y-m-d H:i'});
  });



  function noMondays(date){
      if ('{{cen.dias_abre_centro}}'.includes("Lunes")) { if (date.getDay() === 1) {return [ false, "closed", "Closed on Monday" ]}}
      if ('{{cen.dias_abre_centro}}'.includes("Martes")) { if (date.getDay() === 2) {return [ false, "closed", "Closed on Monday" ]}}
      if ('{{cen.dias_abre_centro}}'.includes("Miercoles")) { if (date.getDay() === 3) {return [ false, "closed", "Closed on Monday" ]}}
      if ('{{cen.dias_abre_centro}}'.includes("Jueves")){ if (date.getDay() === 4) {return [ false, "closed", "Closed on Monday" ]}}
      if ('{{cen.dias_abre_centro}}'.includes("Viernes")) { if (date.getDay() === 5) {return [ false, "closed", "Closed on Monday" ]}}
      if ('{{cen.dias_abre_centro}}'.includes("Sabado")){ if (date.getDay() === 6) {return [ false, "closed", "Closed on Monday" ]}}
      if ('{{cen.dias_abre_centro}}'.includes("Domingo")){ if (date.getDay() === 7) {return [ false, "closed", "Closed on Monday" ]}}
      else {return [ true, "", "" ]}
}


</script>
